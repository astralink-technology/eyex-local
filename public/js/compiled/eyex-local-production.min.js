"use strict";angular.module("eyexApp.landingController",[]).controller("landingController",["$scope","$http","validationServices",function(a,e,c){var n=new Array,o=new Object,i=function(){o.message="Initializing pusher log",n.push(o),a.pusherLogs=n};_channel.bind("eyex_sync",function(e){a.$apply(function(){var c=new Object;c.message=e+" syncing triggered",n.push(c),a.pusherLogs=n})}),i()}]);var _countryData=[{name:"Afghanistan",cca2:"AF",code:"93"},{name:"Albania",cca2:"AL",code:"355"},{name:"Algeria",cca2:"DZ",code:"213"},{name:"American Samoa",cca2:"AS",code:"1684"},{name:"Andorra",cca2:"AD",code:"376"},{name:"Angola",cca2:"AO",code:"244"},{name:"Anguilla",cca2:"AI",code:"1264"},{name:"Antigua and Barbuda",cca2:"AG",code:"1268"},{name:"Argentina",cca2:"AR",code:"54"},{name:"Armenia",cca2:"AM",code:"374"},{name:"Aruba",cca2:"AW",code:"297"},{name:"Australia",cca2:"AU",code:"61"},{name:"Austria",cca2:"AT",code:"43"},{name:"Azerbaijan",cca2:"AZ",code:"994"},{name:"Bahamas",cca2:"BS",code:"1242"},{name:"Bahrain",cca2:"BH",code:"973"},{name:"Bangladesh",cca2:"BD",code:"880"},{name:"Barbados",cca2:"BB",code:"1246"},{name:"Belarus",cca2:"BY",code:"375"},{name:"Belgium",cca2:"BE",code:"32"},{name:"Belize",cca2:"BZ",code:"501"},{name:"Benin",cca2:"BJ",code:"229"},{name:"Bermuda",cca2:"BM",code:"1441"},{name:"Bhutan",cca2:"BT",code:"975"},{name:"Bolivia",cca2:"BO",code:"591"},{name:"Bosnia and Herzegovina",cca2:"BA",code:"387"},{name:"Botswana",cca2:"BW",code:"267"},{name:"Brazil",cca2:"BR",code:"55"},{name:"Brunei Darussalam",cca2:"BN",code:"673"},{name:"Bulgaria",cca2:"BG",code:"359"},{name:"Burkina Faso",cca2:"BF",code:"226"},{name:"Burundi",cca2:"BI",code:"257"},{name:"Cambodia",cca2:"KH",code:"855"},{name:"Cameroon",cca2:"CM",code:"237"},{name:"Canada",cca2:"CA",code:"1"},{name:"Cape Verde",cca2:"CV",code:"238"},{name:"Cayman Islands",cca2:"KY",code:"1345"},{name:"Central African Republic",cca2:"CF",code:"236"},{name:"Chad",cca2:"TD",code:"235"},{name:"Chile",cca2:"CL",code:"56"},{name:"China",cca2:"CN",code:"86"},{name:"Colombia",cca2:"CO",code:"57"},{name:"Comoros",cca2:"KM",code:"269"},{name:"Congo (DRC)",cca2:"CD",code:"243"},{name:"Congo (Republic)",cca2:"CG",code:"242"},{name:"Cook Islands",cca2:"CK",code:"682"},{name:"Costa Rica",cca2:"CR",code:"506"},{name:"Côte d'Ivoire",cca2:"CI",code:"225"},{name:"Croatia",cca2:"HR",code:"385"},{name:"Cuba",cca2:"CU",code:"53"},{name:"Cyprus",cca2:"CY",code:"357"},{name:"Czech Republic",cca2:"CZ",code:"420"},{name:"Denmark",cca2:"DK",code:"45"},{name:"Djibouti",cca2:"DJ",code:"253"},{name:"Dominica",cca2:"DM",code:"1767"},{name:"Dominican Republic",cca2:"DO",code:"1809"},{name:"Ecuador",cca2:"EC",code:"593"},{name:"Egypt",cca2:"EG",code:"20"},{name:"El Salvador",cca2:"SV",code:"503"},{name:"Equatorial Guinea",cca2:"GQ",code:"240"},{name:"Eritrea",cca2:"ER",code:"291"},{name:"Estonia",cca2:"EE",code:"372"},{name:"Ethiopia",cca2:"ET",code:"251"},{name:"Faroe Islands",cca2:"FO",code:"298"},{name:"Fiji",cca2:"FJ",code:"679"},{name:"Finland",cca2:"FI",code:"358"},{name:"France",cca2:"FR",code:"33"},{name:"French Polynesia",cca2:"PF",code:"689"},{name:"Gabon",cca2:"GA",code:"241"},{name:"Gambia",cca2:"GM",code:"220"},{name:"Georgia",cca2:"GE",code:"995"},{name:"Germany",cca2:"DE",code:"49"},{name:"Ghana",cca2:"GH",code:"233"},{name:"Gibraltar",cca2:"GI",code:"350"},{name:"Greece",cca2:"GR",code:"30"},{name:"Greenland",cca2:"GL",code:"299"},{name:"Grenada",cca2:"GD",code:"1473"},{name:"Guadeloupe",cca2:"GP",code:"590"},{name:"Guam",cca2:"GU",code:"1671"},{name:"Guatemala",cca2:"GT",code:"502"},{name:"Guernsey",cca2:"GG",code:"44"},{name:"Guinea",cca2:"GN",code:"224"},{name:"Guinea-Bissau",cca2:"GW",code:"245"},{name:"Guyana",cca2:"GY",code:"592"},{name:"Haiti",cca2:"HT",code:"509"},{name:"Honduras",cca2:"HN",code:"504"},{name:"Hong Kong",cca2:"HK",code:"852"},{name:"Hungary",cca2:"HU",code:"36"},{name:"Iceland",cca2:"IS",code:"354"},{name:"India",cca2:"IN",code:"91"},{name:"Indonesia",cca2:"ID",code:"62"},{name:"Iran",cca2:"IR",code:"98"},{name:"Iraq",cca2:"IQ",code:"964"},{name:"Ireland",cca2:"IE",code:"353"},{name:"Isle of Man",cca2:"IM",code:"44"},{name:"Israel",cca2:"IL",code:"972"},{name:"Italy",cca2:"IT",code:"39"},{name:"Jamaica",cca2:"JM",code:"1876"},{name:"Japan",cca2:"JP",code:"81"},{name:"Jersey",cca2:"JE",code:"44"},{name:"Jordan",cca2:"JO",code:"962"},{name:"Kazakhstan",cca2:"KZ",code:"7"},{name:"Kenya",cca2:"KE",code:"254"},{name:"Kiribati",cca2:"KI",code:"686"},{name:"Kuwait",cca2:"KW",code:"965"},{name:"Kyrgyzstan",cca2:"KG",code:"996"},{name:"Laos",cca2:"LA",code:"856"},{name:"Latvia",cca2:"LV",code:"371"},{name:"Lebanon",cca2:"LB",code:"961"},{name:"Lesotho",cca2:"LS",code:"266"},{name:"Liberia",cca2:"LR",code:"231"},{name:"Libya",cca2:"LY",code:"218"},{name:"Liechtenstein",cca2:"LI",code:"423"},{name:"Lithuania",cca2:"LT",code:"370"},{name:"Luxembourg",cca2:"LU",code:"352"},{name:"Macao",cca2:"MO",code:"853"},{name:"Macedonia",cca2:"MK",code:"389"},{name:"Madagascar",cca2:"MG",code:"261"},{name:"Malawi",cca2:"MW",code:"265"},{name:"Malaysia",cca2:"MY",code:"60"},{name:"Maldives",cca2:"MV",code:"960"},{name:"Mali",cca2:"ML",code:"223"},{name:"Malta",cca2:"MT",code:"356"},{name:"Marshall Islands",cca2:"MH",code:"692"},{name:"Martinique",cca2:"MQ",code:"596"},{name:"Mauritania",cca2:"MR",code:"222"},{name:"Mauritius",cca2:"MU",code:"230"},{name:"Mexico",cca2:"MX",code:"52"},{name:"Micronesia",cca2:"FM",code:"691"},{name:"Moldova",cca2:"MD",code:"373"},{name:"Monaco",cca2:"MC",code:"377"},{name:"Mongolia",cca2:"MN",code:"976"},{name:"Montenegro",cca2:"ME",code:"382"},{name:"Montserrat",cca2:"MS",code:"1664"},{name:"Morocco",cca2:"MA",code:"212"},{name:"Mozambique",cca2:"MZ",code:"258"},{name:"Myanmar (Burma)",cca2:"MM",code:"95"},{name:"Namibia",cca2:"NA",code:"264"},{name:"Nauru",cca2:"NR",code:"674"},{name:"Nepal",cca2:"NP",code:"977"},{name:"Netherlands",cca2:"NL",code:"31"},{name:"New Caledonia",cca2:"NC",code:"687"},{name:"New Zealand",cca2:"NZ",code:"64"},{name:"Nicaragua",cca2:"NI",code:"505"},{name:"Niger",cca2:"NE",code:"227"},{name:"Nigeria",cca2:"NG",code:"234"},{name:"North Korea",cca2:"KP",code:"850"},{name:"Norway",cca2:"NO",code:"47"},{name:"Oman",cca2:"OM",code:"968"},{name:"Pakistan",cca2:"PK",code:"92"},{name:"Palau",cca2:"PW",code:"680"},{name:"Palestinian Territory",cca2:"PS",code:"970"},{name:"Panama",cca2:"PA",code:"507"},{name:"Papua New Guinea",cca2:"PG",code:"675"},{name:"Paraguay",cca2:"PY",code:"595"},{name:"Peru",cca2:"PE",code:"51"},{name:"Philippines",cca2:"PH",code:"63"},{name:"Poland",cca2:"PL",code:"48"},{name:"Portugal",cca2:"PT",code:"351"},{name:"Puerto Rico",cca2:"PR",code:"1787"},{name:"Qatar",cca2:"QA",code:"974"},{name:"Réunion",cca2:"RE",code:"262"},{name:"Romania",cca2:"RO",code:"40"},{name:"Russian Federation",cca2:"RU",code:"7"},{name:"Rwanda",cca2:"RW",code:"250"},{name:"Saint Kitts and Nevis",cca2:"KN",code:"1869"},{name:"Saint Lucia",cca2:"LC",code:"1758"},{name:"Saint Vincent and the Grenadines",cca2:"VC",code:"1784"},{name:"Samoa",cca2:"WS",code:"685"},{name:"San Marino",cca2:"SM",code:"378"},{name:"São Tomé and Príncipe",cca2:"ST",code:"239"},{name:"Saudi Arabia",cca2:"SA",code:"966"},{name:"Senegal",cca2:"SN",code:"221"},{name:"Serbia",cca2:"RS",code:"381"},{name:"Seychelles",cca2:"SC",code:"248"},{name:"Sierra Leone",cca2:"SL",code:"232"},{name:"Singapore",cca2:"SG",code:"65"},{name:"Slovakia",cca2:"SK",code:"421"},{name:"Slovenia",cca2:"SI",code:"386"},{name:"Solomon Islands",cca2:"SB",code:"677"},{name:"Somalia",cca2:"SO",code:"252"},{name:"South Africa",cca2:"ZA",code:"27"},{name:"South Korea",cca2:"KR",code:"82"},{name:"Spain",cca2:"ES",code:"34"},{name:"Sri Lanka",cca2:"LK",code:"94"},{name:"Sudan",cca2:"SD",code:"249"},{name:"Suriname",cca2:"SR",code:"597"},{name:"Swaziland",cca2:"SZ",code:"268"},{name:"Sweden",cca2:"SE",code:"46"},{name:"Switzerland",cca2:"CH",code:"41"},{name:"Syrian Arab Republic",cca2:"SY",code:"963"},{name:"Taiwan, Province of China",cca2:"TW",code:"886"},{name:"Tajikistan",cca2:"TJ",code:"992"},{name:"Tanzania",cca2:"TZ",code:"255"},{name:"Thailand",cca2:"TH",code:"66"},{name:"Timor-Leste",cca2:"TL",code:"670"},{name:"Togo",cca2:"TG",code:"228"},{name:"Toll Free",cca2:"FREE",code:"1800"},{name:"Tonga",cca2:"TO",code:"676"},{name:"Trinidad and Tobago",cca2:"TT",code:"1868"},{name:"Tunisia",cca2:"TN",code:"216"},{name:"Turkey",cca2:"TR",code:"90"},{name:"Turkmenistan",cca2:"TM",code:"993"},{name:"Turks and Caicos Islands",cca2:"TC",code:"1649"},{name:"Tuvalu",cca2:"TV",code:"688"},{name:"Uganda",cca2:"UG",code:"256"},{name:"Ukraine",cca2:"UA",code:"380"},{name:"United Arab Emirates",cca2:"AE",code:"971"},{name:"United Kingdom",cca2:"GB",code:"44"},{name:"United States",cca2:"US",code:"1"},{name:"Uruguay",cca2:"UY",code:"598"},{name:"Uzbekistan",cca2:"UZ",code:"998"},{name:"Vanuatu",cca2:"VU",code:"678"},{name:"Vatican City",cca2:"VA",code:"379"},{name:"Venezuela",cca2:"VE",code:"58"},{name:"Viet Nam",cca2:"VN",code:"84"},{name:"Virgin Islands (British)",cca2:"VG",code:"1284"},{name:"Virgin Islands (U.S.)",cca2:"VI",code:"1340"},{name:"Western Sahara",cca2:"EH",code:"212"},{name:"Yemen",cca2:"YE",code:"967"},{name:"Zambia",cca2:"ZM",code:"260"},{name:"Zimbabwe",cca2:"ZW",code:"263"}];angular.module("eyexApp.countryServices",[]).factory("countryServices",["$http",function(a){return{getCountries:function(){return _countryData}}}]),angular.module("eyexApp.dateTimeServices",[]).factory("dateTimeServices",["stringServices",function(a){return{hourPadLeft:function(a){return 10>a?"0"+a:a},timeSince:function(e){var c,n=moment(),o=n.diff(e,"seconds"),i=n.diff(e,"minutes"),r=n.diff(e,"hours"),d=n.diff(e,"days"),t=n.diff(e,"weeks"),m=n.diff(e,"months"),l="";return m>1?l="On "+moment(e).format("ddd MMM YYYY, h:mm a"):m?(c="month",l=m+" "+a.pluralize(m,c)+" ago on "+moment(e).format("DD MMM YYYY h:mma")):t?(c="week",l=t+" "+a.pluralize(t,c)+" ago on "+moment(e).format("DD MMM YYYY h:mma")):d?(c="day",l=d+" "+a.pluralize(d,c)+" ago on "+moment(e).format("DD MMM YYYY h:mma")):r?(c="hour",l=r+" "+a.pluralize(r,c)+" ago at "+moment(e).format("h:mma")):i?(c="min",l=i+" "+a.pluralize(i,c)+" ago"):o&&(c="s",l=o+c+" ago"),l}}}]),angular.module("eyexApp.eyexServices",[]).factory("eyexServices",["$http",function(a){return{checkCompanyLogoExists:function(){var a=$.ajax({type:"HEAD",url:"../../../comp_logo/co-logo.jpg",async:!1});return 200==a.status?!0:!1},checkUserProfilePicExists:function(a){var e=$.ajax({type:"HEAD",url:"../../../data/"+a+"/profile-pic.jpg",async:!1});return 200==e.status?!0:!1},deviceBroadcast:function(e){a.get("/eyex-lite/controllers/device/deviceBroadcast.php").success(function(a,c,n,o){e(a)}).error(function(a){e(a)})},rs485Broadcast:function(e){a.get("/eyex-lite/controllers/device/deviceBroadcast.php").success(function(a,c,n,o){e()})}}}]),angular.module("eyexApp.loadServices",[]).factory("loadServices",function(){return{loadAjaxLoader:function(a,e,c,n,o,i){var r='<div class="modal fade ajax-loader" id="modal-'+a+'"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><h2 id="modal-title-'+a+'"></h2><p class="modal-text"><i class="fa fa-circle-o-notch fa-spin"></i> <span id="modal-text-'+a+'"></span></p></div></div></div></div>';$("#"+e).append(r),c&&$("#modal-title-"+a).text(c),n&&$("#modal-text-"+a).text(n),$("#modal-"+a).modal({keyboard:i,backdrop:o})},closeAjaxLoader:function(a){$("#modal-"+a).modal("hide")},confirmBox:function(a,e,c,n,o,i,r,d){var t='<div class="modal fade ajax-loader" id="confirmBox-'+a+'"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><h2 id="modal-title-'+a+'"></h2><p class="modal-text"><span id="modal-text-'+a+'"></span></p><div class="modal-controls"><button class="btn btn-link btn-close" id="btnCloseConfirm-'+a+'">Cancel</button><button class="btn btn-primary btn-confirm" id="btnConfirm-'+a+'">Confirm</button></div>';$("#"+e).append(t),c&&$("#modal-title-"+a).text(c),n&&$("#modal-text-"+a).text(n),$("#confirmBox-"+a).modal({keyboard:i,backdrop:o}),$("#btnConfirm-"+a).click(function(){r()}),$("#btnCloseConfirm-"+a).click(function(){d()})},closeConfirmBox:function(a){$("#confirmBox-"+a).modal("hide")}}}),angular.module("eyexApp.pageServices",[]).factory("pageServices",function(){return{loadPager:function(a,e,c){for(var n='<ul class="pagination"><li><a href="javascript:void(0)" id="prevPage"><i class="fa fa-chevron-left"></i></a></li>',o=0;e>o;o++){var i=o+1;n+=i==c?'<li class="active"><a href="javascript:void(0)" class="page-number" data-pagenum="'+i+'">'+i+"</a></li>":'<li><a href="javascript:void(0)" class="page-number" data-pagenum="'+i+'">'+i+"</a></li>"}n+='<li><a href="javascript:void(0)" id="nextPage"><i class="fa fa-chevron-right"></i></a></li>',$(a).html(n)}}}),angular.module("eyexApp.paramsServices",[]).factory("paramsServices",["$http",function(a){return{getParameterByName:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=e.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}}}]);var sigmaVariablesAnalysis=function(a){for(var e,c={mean:0,variance:0,deviation:0},n=a.length,o=0,i=n;i--;o+=a[i]);for(e=c.mean=o/n,i=n,o=0;i--;o+=Math.pow(a[i]-e,2));return c.deviation=Math.sqrt(c.variance=o/n),c},withinSigma=function(a,e,c){var n=a.mean-c*a.deviation,o=a.mean+c*a.deviation;return e>n&&o>e};angular.module("eyexApp.statisticsServices",[]).factory("statisticsServices",["$http","dateTimeServices",function(a,e){return{medianTime:function(a){if(a.length>1){a.sort();var c=Math.floor(a.length/2);if(a.length%2){var n=parseInt(a[c].substring(0,a[c].indexOf(":"))),o=a[c].substring(a[c].indexOf(":")+1);return n>23?(n-=24,e.hourPadLeft(n)+":"+o):a[c]}var n=parseInt(a[c-1].substring(0,a[c-1].indexOf(":"))),o=a[c-1].substring(a[c-1].indexOf(":")+1);return n>23?(n-=24,e.hourPadLeft(n)+":"+o):a[c-1]}return 1==a.length?a[0]:null},median:function(a,e){a.sort(function(a,e){return a-e});var c=Math.floor(a.length/2);return a.length%2?a[c]:e?Math.floor((a[c-1]+a[c])/2):(a[c-1]+a[c])/2},mode:function(a){if(0==a.length)return null;for(var e={},c=a[0],n=1,o=0;o<a.length;o++){var i=a[o];null==e[i]?e[i]=1:e[i]++,e[i]>n&&(c=i,n=e[i])}return c},modeArrays:function(a){if(0==a.length)return null;for(var e={},c=1,n=[a[0]],o=0;o<a.length;o++){var i=a[o];null==e[i]?e[i]=1:e[i]++,e[i]>c?(n=[i],c=e[i]):e[i]==c&&(n.push(i),c=e[i])}return n},sigmaArrange:function(a,e){for(var c=sigmaVariablesAnalysis(a),n=new Array,o=new Array,i=0;i<a.length;i++)withinSigma(c,a[i],e)?n.push(a[i]):o.push(a[i]);var r=new Object;return r.arranged=n,r.outliers=o,r}}}]),angular.module("eyexApp.stringServices",[]).factory("stringServices",function(){return{pluralize:function(a,e){var c=e.substr(e.length-1),n=["day"],o=!1;if(-1!=$.inArray(e,n)&&(o=!0),e){if(a>1){if(o)e+="s";else if("f"==c){var i=e.lastIndexOf("f");e=e.substring(0,i)+"ves"}else if("y"==c){var i=e.lastIndexOf("y");e=e.substring(0,i)+"ies"}else e+="s";return e}return e}return e},padFront:function(a,e){for(var c=a+"";c.length<e;)c="0"+c;return c}}}),angular.module("eyexApp.validationServices",[]).factory("validationServices",function(){return{validateRequiredField:function(a,e){return a?!1:e?e:"Required"},validateEmail:function(a,e,c,n){if(e){if(a){var o=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return o.test(a)?!1:n?n:"Invalid Email"}return c?c:"Required"}if(a){var o=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return o.test(a)?!1:n?n:"Invalid Email"}return"Unable to validate Email"},validateAlphaNumeric:function(a,e,c,n){if(e){if(a){var o=/^[a-z0-9]+$/i;return o.test(a)?!1:n?n:"Alphanumeric. Must not contain other characters"}return c?c:"Required"}if(a){var o=/^[a-z0-9]+$/i;return o.test(a)?!1:n?n:"Invalid"}return"Alphanumeric. Must not contain other characters"},validateRequiredLength:function(a,e,c,n,o){return e?a?a.length<n?o?o:n+" characters required":!1:c?c:"Required":a&&a.length<n?o?o:n+" characters required":!1},validateRequiredSimilarField:function(a,e,c,n,o){return e?a?a==n?!1:o?o:"Fields does not match":c?c:"Required":a?a==n?!1:o?o:"Fields does not match":!1},validateRequiredUrl:function(a,e,c,n){if(e){if(a){var o=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:[A-Za-z0-9].|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/;return o.test(a)?!1:n?n:"Invalid URL"}return c?c:"Required"}if(a){var o=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:[A-Za-z0-9].|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/;return o.test(a)?!1:n?n:"Invalid URL"}return"Unable to validate URL"},validateRequiredInteger:function(a,e,c,n){return e?a?$.isNumeric(a)?!1:n?n:"Not a number":c?c:"Required":a?$.isNumeric(a)?!1:n?n:"Not a number":!1}}});